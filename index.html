<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age of Pixels</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <header class="header">
        <img src="./image/header-logo.png" class="header__logo" alt="header logo">
        <img src="./image/mobile-menu.png" alt="mobile menu" class="header__mobile_menu">
    </header>


    <main class="main">

        <!-- first area -->
        <section class="castle-section">
            <div class="main__hero">
                AGE OF<br>PIXELS
            </div>
            <div class="main__btns">
                <span class="pixel-button">
                    <button class="pixel-button__pressable">
                        Buy on OPENSEA
                    </button>
                </span>
                <span class="pixel-button">
                    <button class="pixel-button__pressable">
                        Play the Game
                    </button>
                </span>
            </div>
        </section>

        <!-- second area -->
        <section class="richard-section">
            <img class="richard-section__hero-image" src="./image/ring-richard.png" alt="richard character">
            <div class="richard-section__wrapper">
                <div class="neon">
                    <h2 class="richard-section__title">AGE OF PIXELS</h2>
                    <p class="richard-section__info">
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                        the
                        industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                        type
                        and
                        scrambled it to make a type specimen book.
                    </p>
                    <span class="pixel-button">
                        <button class="pixel-button__pressable">
                            navigate to roadmap
                        </button>
                    </span>
                </div>
            </div>
        </section>

        <!-- second area -->
        <section class="roadmap-section">
            <load-file replaceWith src="auto">
                <style shadowRoot>
                    .an:hover {
                        filter: url(#f1);
                    }
                </style>
            </load-file>
        </section>



    </main>
    <footer class="footer"></footer>

    <script>

        customElements.define("load-file", class extends HTMLElement {

            // declare default connectedCallback as async so await can be used
            async connectedCallback(
                // call connectedCallback with parameter to *replace* SVG (of <load-file> persists)
                // attach a shadowRoot if none exists (prevents displaying error when moving Nodes)
                // declare as parameter to save 4 Bytes: 'let '
                shadowRoot = this.shadowRoot || this.attachShadow({ mode: "open" })
            ) {
                var src;
                if (window.matchMedia("(max-width: 48rem)").matches) {
                    src = '/image/map/mobile-map.svg'
                } else {
                    src = '/image/map/desktop-map.svg'
                }
                // load SVG file from src="" async, parse to text, add to shadowRoot.innerHTML
                shadowRoot.innerHTML = await (await fetch(src)).text()

                // append optional <tag [shadowRoot]> Elements from <load-svg> innerHTML/lightDOM after parsed <svg>
                shadowRoot.append(...this.querySelectorAll("[shadowRoot]"))

                // if "replaceWith" attribute exists
                // then replace <load-svg> with loaded content <load-svg>
                // childNodes instead of children to include #textNodes also
                this.hasAttribute("replaceWith") && this.replaceWith(...shadowRoot.childNodes)

                var event = new CustomEvent("svgLoaded", {});
                document.dispatchEvent(event);
            }
        })
    </script>

    <script>
        document.addEventListener("svgLoaded", function (e) {
            const lands = Array.from(document.querySelectorAll('svg [id^=land_]'))
                .forEach((land) => {
                    land.addEventListener('ontouchstart', () => {
                        land.style.fill = 'burlywood';
                        land.style.fillOpacity = '0.5';
                        land.style.stroke = 'rgb(224, 197, 42)';
                        land.style.strokeOpacity = '0.5';
                    })
                })
        });
    </script>
</body>

</html>